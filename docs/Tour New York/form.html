<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="style.css">
    <title>NYC Survey</title>

<!-- JAVASCRIPT -->
<script>
    // function to check if the date is not past today

    function dateCheck() {
        var dataValid = false;
        var vdate = document.getElementById('visitDate').value;
        var today = new Date();
        console.log("user date " + vdate);
        var dd = today.getDate();
        var mm = today.getMonth();
        var yyyy = today.getFullYear();

        if (dd < 10) {
            dd = "0" + dd;
        }
        if (mm < 10) {
            mm = "0" + mm;
        }

        var todayDate = "" + yyyy + "-" + mm + "-" + dd;
        console.log("console date " + todayDate);

        if(vdate >= todayDate){
            document.getElementById('errorMessage').innerHTML="  ** Warning:You cannot select today or the days after. **  ";
            document.getElementById("visitDate").style.borderColor="red";
            document.getElementById("errorMessage").style.backgroundColor = 'pink';
            dateValid = false;
        }
        else  {
            document.getElementById('errorMessage').innerHTML="";
            document.getElementById("visitDate").style.border = null;
            document.getElementById("errorMessage").style = null;
            dateValid = true;
        }

        console.log("In function to check date - dateValid is " + dateValid);
        return (dateValid);
    }

// RADIO BUTTON CHECK

function radioCheck(){

    var isChecked = false;
    var len = document.getElementsByName('fplace').length;
    var choices = new Array();
    for (var i=0; i<len; i++)
    {
        if (document.getElementsByName('fplace')[i].checked)
        {
            choices.push(document.getElementsByName('fplace')[i].value);
        }
    }//end of for loop

    if (choices.length > 0){
        isChecked = true;
        document.getElementsByTagName('fieldset')[0].style = null;
        document.getElementsByTagName('legend')[0].style= null;
    }
    else{
        document.getElementsByTagName('fieldset')[0].style.borderColor = 'red';
        document.getElementsByTagName('legend')[0].style.color = 'red';
    }


    console.log("In function to check radio buttons  - isChecked value -> " + isChecked);
    return isChecked;
}

// VALIDATE FORM

function check() {
        
    var isvalid=true;
    radioButtonChecked = false;

    if(document.getElementById("visitor").value == ''){
        document.getElementById("visitor").style.borderColor="red";
        document.getElementById("visitor").style.backgroundColor = 'pink';
        isvalid=false;
    }
    else {
        document.getElementById("visitor").style = null;
    }
    if(document.getElementById("visitDate").value == '') {
        document.getElementById("visitDate").style.borderColor="red";
        document.getElementById("visitDate").style.backgroundColor = 'pink';
        isvalid=false;
    }
    else {
        document.getElementById("visitDate").style = null;
    }

        var radioButtonChecked =  radioCheck();
        var correctDate = dateCheck();

    console.log("is name ok? "+isvalid);
    console.log("was a radio Button checked? "+radioButtonChecked);
    console.log("was the date previous in the year? "+correctDate);
    return (isvalid && radioButtonChecked && correctDate);
    return false;
    }


</script>


</head>
    <div class="container" style="padding-left:25px;">
        <form id="inside" action="submit.php" method="GET" onsubmit="return check();">
            <h2 id="underline" class="basictext" >Please tell us about your visit</h2>
            <br>
            <br>

            <div class="basictext" id="name">
                Enter your name 
                <input type="text" id="visitor" name="visitor" placeholder="Required Entry">
                <span class="astric"> * </span>
            </div> <!-- end of name -->

            <div class="basictext" id="group">
                How many people in your group 
                <input type="number" name="groupNum" min="0" max="50" step="1" style = "margin-bottom: 20px;">
            </div> <!-- end of group -->
            
            <div class="basictext" id="when">
                When did you visit?
                <input type="date" name="vdate" id="visitDate">
                <span class="astric"> * </span>
                <p id="errorMessage"></p>
            </div> <!-- end of when-->

            <div id="favplace" style="width:50%;">
                <fieldset>
            <legend class="basictext" >Favorite Place - Must Select one</legend>
            <input type="radio" onclick="turnoff()" name="fplace" value="Brooklyn Bridge Park" id="bbp" ><label class="basictext" for="bbp">Brooklyn Bridge Park</label><br>
            <input type="radio" onclick="turnoff()" name="fplace" value="Central Park" id="cp"><label class="basictext" for="cp">Central Park</label><br>
            <input type="radio" onclick="turnoff()" name="fplace" value="Time Square" id="ts"><label class="basictext" for="ts">Time Square</label><br>
            <input type="radio" onclick="turnoff()" name="fplace" value="Bronx Zoo" id="bz"><label class="basictext" for="bz">Bronx Zoo</label><br>
            <input type="radio" onclick="turnoff()" name="fplace" value="Absolute Bagel" id="ab"><label class="basictext" for="ab">Absolute Bagel</label><br>
            <input type="radio" onclick="turnoff()" name="fplace" value="Joe's Pizza" id="jp"><label class="basictext" for="jp">Joe's Pizza</label><br>
            <input type="radio" onclick="turnoff()" name="fplace" value="bb.q Olive Chicken" id="bbq"><label class="basictext" for="bbq">bb.q Olive Chicken</label><br>
            <input type="radio" onclick="turnoff()" name="fplace" value="Sushi Azabu" id="sa"><label class="basictext" for="sa">Sushi Azabu</label><br>
            <input type="radio" onclick="turnoff()" name="fplace" value="O2 BBQ" id="o2"><label class="basictext" for="o2">O2 BBQ</label><br>
            <input type="radio" onclick="turnoff()" name="fplace" value="Diwan Grill" id="dg"><label class="basictext" for="dg">Diwan Grill</label><br>
            <input type="radio" name="fplace" value="Other" id="other" onclick="otherplaces();"><label class="basictext" for="other">Other</label>
                &nbsp;&nbsp;
        <input name="other_places" placeholder="Enter Place" type="text" id="other_places" size="60" style="visibility: hidden;">
                <br>
            </fieldset>

            </div> <!-- end of fave place-->

            <div id="scrollbar" class="basictext" >
                <br>Please rate New York City<br>
                <p class="basictext" >0
                <input type="range" name="rating" min="0" max="10" step="1" list="set">
                <datalist id = "set">
                <option>0</option>
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
                <option>6</option>
                <option>7</option>
                <option>8</option>
                <option>9</option>
                <option>10</option>
                </datalist>
                10</p>
            </div><!-- end of scroll bar -->
            

            <div id="button">   
                <input type="submit">
                
            </div>
            <br>
            <br>
            <br>

            

        </form> <!-- end of form -->
        <!-- <button onclick="dateCheck();">date</button>
        <button onclick="radioCheck();">radio</button>
        <button onclick="check();">checkform</button> -->
</div>

<script>
var other2 = document.getElementById('other_places');
other2.style.visibility = 'hidden';
function otherplaces()
{

    var other = document.getElementById('other');
    console.log(other.attributes);
    if  (other.checked == true)  {
        console.log("turn other box visible");
        other2.style.visibility = 'visible';
    } else {
        other2.style.visibility = 'hidden';
        }

    }//end of function


    function turnoff()
    {
        var other = document.getElementById('other');
        other2.style.visibility = 'hidden';
        other2.value="";
    }
</script>

</body>
</html>

